{% extends "Base.html" %}
{% block titulo %} Factura  {% endblock titulo %}
{%block FacturacionActivo%}active{%endblock FacturacionActivo%}
{% block contenido %}
<div class="containter" style="margin-left:30px; margin-top:20px" >
          <h6 style ="font-family:  'Hoefler Text', Georgia, 'Times New Roman', serif;
                    font-weight: normal;
                    font-size: 1.4em;
                    letter-spacing: .2em;
                    line-height: 1.1em;
                    margin:0px;
                    text-align: left;
                    ">
          Facturar</h6>
  RFC Cliente: <br><input type="text" name="Cliente"><br>
  Fecha: <br><input type="text" name="Fecha" value=""><br>

  <table class = "table table-striped">
	<thead>
		<tr>
			<th>Nombre</th>
			<th>Cantidad</th>
			<th>Precio</th>
			<th>Total</th>
			<th></th>
		</tr>
	</thead>
<tbody>
</tbody>
</table>


    <div id="example" class="modal hide fade in" style="display: none; ">  
    <div class="modal-header">  
    <a class="close" data-dismiss="modal">Ã—</a>  
  <h3>Seleccionar Producto</h3>  
</div>  
<div class="modal-body">  
  Clave del producto:<br><input type="text" name="Producto" id="claveP"><br>
  Nombre del producto:<br><input type="text" name="Nombre" id="nombreP"><br>
   <table class = "table table-striped" id ="TablaProductos">
  <thead>
    <tr>
      <th>Clave</th>
      <th>Nombre</th>
      <th>Descripcion</th>
      <th>Precio</th>
      <th></th>
    </tr>
  </thead>
<tbody>
</tbody>
</table>               
</div>  
<div class="modal-footer">  
  <a onClick="link()" class="btn btn-success">Buscar Producto</a>  
  <a href="#" class="btn" data-dismiss="modal">Cerrar</a>  
</div>  
</div>  
  <a data-toggle="modal" href="#example" class="btn btn-info">Buscar Producto</a>

<div  style="float: right; margin-right:190px">
  Subtotal: <input type="text" name="Subtotal"><br>
  Pago: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="Pago"><br>
 </div>
<br>
<br>
<input type="submit" value = "Generar Factura" class="btn btn-primary">

 </div>

<script>
function link()
{
   var element = document.createElement("input");

     //Assign different attributes to the element.
    element.setAttribute("type", "Button");
    element.setAttribute("value", "Seleccionar");
    element.setAttribute("name", "Button");
    element.setAttribute("class", "btn");
    element.setAttribute("onClick","AgregarProducto()")
    var nomP=document.getElementById("nombreP").value;
    var claP=document.getElementById("claveP").value;
    nomP=nomP.toLowerCase();
    claP=claP.toLowerCase();

  var table=document.getElementById("TablaProductos");
  var rowCount = table.rows.length;
  for (var x=rowCount-1; x>0; x--) {
    table.deleteRow(x);
  }
  {% for p in productos %}
  var iii="{{p.Clave_Producto}}".toLowerCase();
  var yyy="{{p.Nombre}}".toLowerCase();
    if (iii.indexOf(claP) != -1 && yyy.indexOf(nomP) != -1)
    {

      var row=table.insertRow(-1);
      var cellClave=row.insertCell(0);
      var cellNombre=row.insertCell(1);
      var cellDescripcion=row.insertCell(2);
      var cellPrecio=row.insertCell(3);
      var cellSeleccionar = row.insertCell(4);
      cellClave.innerHTML="{{p.Clave_Producto}}";
      cellNombre.innerHTML="{{p.Nombre}}";
      cellDescripcion.innerHTML = "{{p.Descripcion}}";
      cellPrecio.innerHTML = "{{p.Precio}}";
      cellSeleccionar.appendChild(element);      
    }
    

    {% empty %}

  {% endfor %}
}
function AgregarProducto()
{

}
</script> 
{% endblock contenido %}
